<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>SBJsonStreamParser Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">SBJson 3.2 </a></h1>
				<a id="developerHome" href="../index.html">Stig Brautaset</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">SBJsonStreamParser Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/delegate">&nbsp;&nbsp;&nbsp;&nbsp;delegate</option>
	
	<option value="//api/name/error">&nbsp;&nbsp;&nbsp;&nbsp;error</option>
	
	<option value="//api/name/maxDepth">&nbsp;&nbsp;&nbsp;&nbsp;maxDepth</option>
	
	<option value="//api/name/state">&nbsp;&nbsp;&nbsp;&nbsp;state</option>
	
	<option value="//api/name/stateStack">&nbsp;&nbsp;&nbsp;&nbsp;stateStack</option>
	
	<option value="//api/name/supportMultipleDocuments">&nbsp;&nbsp;&nbsp;&nbsp;supportMultipleDocuments</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/parse:">&nbsp;&nbsp;&nbsp;&nbsp;- parse:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/delegate">delegate</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/error">error</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/maxDepth">maxDepth</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/state">state</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/stateStack">stateStack</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/supportMultipleDocuments">supportMultipleDocuments</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/parse:">parse:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="SBJsonStreamParser Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">SBJsonStreamParser Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">SBJsonStreamParser.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>Parse a stream of JSON data.</p>

<p>Using this class directly you can reduce the apparent latency for each
download/parse cycle of documents over a slow connection. You can start
parsing <em>and return chunks of the parsed document</em> before the entire
document is downloaded.</p>

<p>Using this class is also useful to parse huge documents on disk
bit by bit so you don&rsquo;t have to keep them all in memory.</p>

<p>JSON is mapped to Objective-C types in the following way:</p>

<ul>
<li>null    &ndash;> NSNull</li>
<li>string  &ndash;> NSString</li>
<li>array   &ndash;> NSMutableArray</li>
<li>object  &ndash;> NSMutableDictionary</li>
<li>true    &ndash;> NSNumber&rsquo;s -numberWithBool:YES</li>
<li>false   &ndash;> NSNumber&rsquo;s -numberWithBool:NO</li>
<li>integer up to 19 digits &ndash;> NSNumber&rsquo;s -numberWithLongLong:</li>
<li>all other numbers       &ndash;> NSDecimalNumber</li>
</ul>


<p>Since Objective-C doesn&rsquo;t have a dedicated class for boolean values,
these turns into NSNumber instances. However, since these are
initialised with the -initWithBool: method they round-trip back to JSON
properly. In other words, they won&rsquo;t silently suddenly become 0 or 1;
they&rsquo;ll be represented as &lsquo;true&rsquo; and &lsquo;false&rsquo; again.</p>

<p>As an optimisation integers up to 19 digits in length (the max length
for signed long long integers) turn into NSNumber instances, while
complex ones turn into NSDecimalNumber instances. We can thus avoid any
loss of precision as JSON allows ridiculously large numbers.</p>

<p>See also <a href="../Classes/SBJsonStreamParserAdapter.html">SBJsonStreamParserAdapter</a> for more information.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/state">&nbsp;&nbsp;state</a></code>
		
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/stateStack">&nbsp;&nbsp;stateStack</a></code>
		
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/supportMultipleDocuments">&nbsp;&nbsp;supportMultipleDocuments</a></code>
		<span class="tooltip"><p>Expect multiple documents separated by whitespace</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/delegate">&nbsp;&nbsp;delegate</a></code>
		<span class="tooltip"><p>Delegate to receive messages</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/maxDepth">&nbsp;&nbsp;maxDepth</a></code>
		<span class="tooltip"><p>The max parse depth</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/error">&nbsp;&nbsp;error</a></code>
		<span class="tooltip"><p>Holds the error after SBJsonStreamParserError was returned</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/parse:">&ndash;&nbsp;parse:</a></code>
		<span class="tooltip"><p>Parse some JSON</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/delegate" title="delegate"></a>
	<h3 class="subsubtitle method-title">delegate</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Delegate to receive messages</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (unsafe_unretained) id&lt;&gt; delegate</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Delegate to receive messages</p>

<p>The object set here receives a series of messages as the parser breaks down the JSON stream
into valid tokens.</p>

<p>Usually this should be an instance of <a href="../Classes/SBJsonStreamParserAdapter.html">SBJsonStreamParserAdapter</a>, but you can
substitute your own implementation of the <a href="../Protocols/SBJsonStreamParserDelegate.html">SBJsonStreamParserDelegate</a> protocol if you need to.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/error" title="error"></a>
	<h3 class="subsubtitle method-title">error</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Holds the error after SBJsonStreamParserError was returned</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (copy) NSString *error</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Holds the error after SBJsonStreamParserError was returned</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/maxDepth" title="maxDepth"></a>
	<h3 class="subsubtitle method-title">maxDepth</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The max parse depth</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property NSUInteger maxDepth</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>The max parse depth</p>

<p>If the input is nested deeper than this the parser will halt parsing and return an <a href="#//api/name/error">error</a>.</p>

<p>Defaults to 32.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/state" title="state"></a>
	<h3 class="subsubtitle method-title">state</h3>
	
	

	<div class="method-subsection method-declaration"><code>@property (nonatomic, unsafe_unretained) SBJsonStreamParserState *state</code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/stateStack" title="stateStack"></a>
	<h3 class="subsubtitle method-title">stateStack</h3>
	
	

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly, strong) NSMutableArray *stateStack</code></div>

    
</div>
						
						<div class="section-method">
	<a name="//api/name/supportMultipleDocuments" title="supportMultipleDocuments"></a>
	<h3 class="subsubtitle method-title">supportMultipleDocuments</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Expect multiple documents separated by whitespace</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property BOOL supportMultipleDocuments</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Expect multiple documents separated by whitespace</p>

<p>Normally the <a href="#//api/name/parse:">parse:</a> method returns SBJsonStreamParserComplete when it&rsquo;s found a complete JSON document.
Attempting to parse any more data at that point is considered an <a href="#//api/name/error">error</a>. (&ldquo;Garbage after JSON&rdquo;.)</p>

<p>If you set this property to true the parser will never return SBJsonStreamParserComplete. Rather,
once an object is completed it will expect another object to immediately follow, separated
only by (optional) whitespace.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/parse:" title="parse:"></a>
	<h3 class="subsubtitle method-title">parse:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Parse some JSON</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (SBJsonStreamParserStatus)parse:(NSData *)<em>data</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>data</em></dt>
			<dd><p>An NSData object containing the next chunk of JSON</p>

<p>@return
&ndash; SBJsonStreamParserComplete if a full document was found
&ndash; SBJsonStreamParserWaitingForData if a partial document was found and more data is required to complete it
&ndash; SBJsonStreamParserError if an <a href="#//api/name/error">error</a> occured. (See the <a href="#//api/name/error">error</a> property for details in this case.)</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Parse some JSON</p>

<p>The JSON is assumed to be UTF8 encoded. This can be a full JSON document, or a part of one.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">SBJsonStreamParser.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Stig Brautaset. All rights reserved. (Last updated: 2013-02-08)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>